:root{
    --introHeight: calc(100vh - (var(--unit) * 2 + var(--navHeight)));
    --sigHeight: calc(var(--halfUnit));
    --sigWidth: calc(var(--sigHeight) * 2.73);
    --sectionItemHeight: calc((var(--elWidth) - var(--halfUnit)) / 3);    
    --sectionItemPadding: var(--halfUnit);
    --coverImageHeight: calc(100vh - calc(var(--navHeight) + 2px));
    --coverImageWidth: 100vw;
}

@supports(height: 1svh){
    :root{
        --introHeight: calc(100svh - (var(--unit) * 2 + var(--navHeight)));
        --coverImageHeight: calc(100svh - calc(var(--navHeight) + 2px));
    }
}

@keyframes shiftUp{
    0% { transform: translateY(100vh); }
    100% { transform: translateY(0vh); }
} 

.coverImage{
    height: var(--coverImageHeight);
    width: var(--coverImageWidth);
    margin-top: calc(var(--navHeight) + 2px);
    position: relative;
    overflow: hidden;
}

.slides{
    display: flex;
    transition: transform 0.5s ease-in-out;
}

.slides img{
    height: var(--coverImageHeight);
    width: var(--coverImageWidth);
    flex: 0 0 var(--coverImageWidth);
    object-fit: cover;
    object-position: 22% 50%;
    filter: grayscale(1);
    transition: filter 0.5s ease;
    display: block;
}
.slides img:hover{
    filter: grayscale(0);
}

.clicker{
    position: absolute;
    font-size: 40px;
    color: white;
    cursor: pointer;
    background-color: rgba(0, 0, 0, 0.3);
    padding: 10px 10px 14.4px 10px;
}
.clicker:hover{
    background-color: rgba(0, 0, 0, 0.8);
}

.prev, .next{
    top: 50%;
    transform: translateY(-50%);
    user-select: none;
}
.prev{
    left: 10px;
}
.next{
    right: 10px;
}

.rest{
    position: absolute;
    bottom: 0;
    right: 50%;
    color: #D3D3D3;
    transform: translateX(50%);
    font-size: 2rem;
    margin-bottom: 20px;
    transition: color 0.5s ease;
    cursor: pointer;
}
.rest:hover{
    color: white;
}

.border{
    position: absolute;
    transition: top 2s ease;
    width: 100%;
    background: repeating-linear-gradient(
        to right, var(--bgGradientColors));
    top: 0;
    transition: top 2s ease;
}
.border:not(.moveUp), .border:not(.moveUp) *{
    display: none;
}
.border.moveUp{
    animation: shiftUp 1.5s ease-in-out 1;
}

.rest2{
    top: 0;
    right: 50%;
    transform: translateX(50%) rotate(-90deg);
    color: rgb(255, 80, 80);
    background-color: rgba(255,255,255,0.8);;
}
.rest2:hover{
    background-color: pink;
}

.border.moveDown{
    top: 100vh;
}

.intro{
    max-width: var(--elWidth);
    width: fit-content;
    margin: var(--eighthUnit) auto var(--eighthUnit) auto; 
    height: var(--introHeight);
    display: flex;
    position: relative;
}

#imgContainer{
    flex: 1;
    margin-right: var(--quarterUnit);
}

#imgContainer img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: 50% 25%;
    display: block; /* for narrow screens */
}

#introContent{
    width: fit-content;
    overflow: hidden;
    background: var(--containerBg);
    padding: var(--halfUnit);
    position: relative;
}

#introContentWrapper{
    overflow: hidden;
}

#introText{
    text-align: justify;
    line-height: 1.3;
    column-count: 2;
    column-gap: var(--thirdUnit);
}
#introText *{
    font-size: 1rem;
}
#introText .firstPara::first-letter{
    font-size: 2.6rem;
    color: var(--color1);
    float: left;
    margin-right: 0.6rem;
    margin-top: 0.3rem;
}

.apostrophe {
    font-size: 2.6rem !important;
    color: var(--color1);
    display: inline-block;
    vertical-align: bottom;
    margin-left: 0.2rem;
}
.apostrophe::before {
    content: '';
    display: block;
    height: 0;
    width: 0;
    margin-top: -2rem;
}
.apostrophe::after {
    content: '';
    display: block;
    height: 0;
    width: 0;
    margin-bottom: -1.5rem;
}

#signature{
    width: var(--sigWidth);
    height: var(--sigHeight);
    position: absolute;
    top: calc(100% + 1rem);
    right: 0;
}

.introCloseText{
    position: absolute;
    top: -2rem;
    right: 1rem;
    height: var(--introHeight);
    display: flex;
    justify-content: center;
}

.introCloseText, .introCloseText *{
    color: var(--color2); 
    display: inline-block;
    transition: transform 0.5s ease;
    font-family: bahnschrift;
    font-size: 1.3rem;
}

.introCloseText.long{
    top: 1rem;
    right: calc(var(--quarterUnit) * -1.95);
    writing-mode: vertical-lr;
}
.introCloseText.long, .introCloseText.long *{
    font-size: calc(calc(var(--introHeight) - 2rem) / 22);
}
.introCloseText *:not(div){
    text-decoration: underline;
    text-decoration-thickness: 3px;
    text-underline-offset: 4px;
}

.introCloseText.short, .introCloseText_shorter{
    display: none;
}

.introCloseText a:hover{
    transform: translateX(-1em);
}

.introCloseText:not(.shorter) a:nth-of-type(2):hover{
    transform: translateX(1em);
}

.introCloseText.long a:hover{
    transform: translateY(-1em);
}

.introCloseText.long a:nth-of-type(2):hover{
    transform: translateY(1em);
}



/* ------------ SECTIONS -------------- */



.section{
    display: grid;
    grid-template-columns: repeat(3,1fr);
    gap: var(--quarterUnit);
    width: fit-content;
    margin: 0 auto;
}
.section:not(:last-of-type){
    margin-bottom: var(--eighthUnit);
}

.siContainer{
    height: var(--sectionItemHeight);
    width: var(--sectionItemHeight);
    perspective: 800px;
}
.flipping{
    z-index: 10;
}

.flipper{
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s ease; 
}

.sectionItem{
    padding: var(--sectionItemPadding);
    background: var(--containerBg);
    height: var(--sectionItemHeight);
    width: var(--sectionItemHeight);
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}

.front, .back{
    position: absolute;
    backface-visibility: hidden;
}

.back{
    transform: rotateY(-180deg);
    text-align: right;
}
.back ul{
    list-style: none;
}

.front .contentWrapper{
    transition: opacity 0.1s ease;
    transition-delay: 0.15s; 
}
.flipper.flipped .front .contentWrapper{
    opacity: 0;
}
.flipper.flipped{
    transform: rotateY(-180deg);
}
.flipper:hover{
    transform: rotateY(-10deg);
}
.flipped:hover{
    transform: rotateY(-170deg);
}

.sectionItem.image{
    padding: 0 !important;
    transition: filter 0.5s ease;
    filter: grayscale(1);
}
.sectionItem.image:hover{
    filter: grayscale(0);
}
.sectionItem.image.evens{
    display: none;
}


/* ------------------------- */

.contentWrapper.dl{
    container-type: inline-size;
}

.siContainer *{
    font-size: 6cqi;
}

.front .contentWrapper{
    position: relative;
    overflow: visible;
}
.front .contentWrapper, .back .contentWrapper{
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 100%;
    height: 100%;
    margin: 0;
}
.front h3{
    font-size: 13cqi;
    margin: 0;
    text-decoration: underline;
    text-decoration-thickness: 3px;
    text-underline-offset: 4px;
    font-family: bahnschrift;
    color: var(--color1);
}
.subTitle *{
    font-size: 6.3cqi;
    color: var(--color1);
}
.front .contentWrapper .bold, .front .descDate, .contract{
    width: 100%;
    text-align: end;
}


.back .contentWrapper div{
    width: 100%;
    margin-left: 0;
    list-style-position: outside;
}

.descDate{
    font-weight: bold;
    font-size: 11cqi;
}
.contract{
    display: block;
}
.paper, .paper *{
    font-size: 5cqi;
    text-align: right;
}
.paperName{
    text-align: left;
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 4px;
    margin-bottom: 5px;
}

.number{
    position: absolute;
    bottom: calc(var(--sectionItemPadding) / -1.9);
    left: calc(var(--sectionItemPadding) / -1.5);
    font-size: var(--textSize);
    --textSize: 24cqi;
    color: var(--color1);
}

.ita{
    padding-right: 0.1rem;
}


/* ------------------------- */

#mainTools .contentWrapper{
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    align-items: center;
    container-type: inline-size;
}
#mainTools h3{
    text-align: center;
    font-size: 10cqi;
}
#mainTools img{
    height: 70%;
}



@media (max-width: 1560px) or (max-aspect-ratio: 1/3){
    :root{
        --sectionItemPadding: var(--thirdUnit);
    }
}



@media (max-width: 1440px) or (max-aspect-ratio: 1/3){
    :root{
        --sectionItemPadding: var(--quarterUnit);
    }
}



@media (max-width: 1300px) or (max-aspect-ratio: 1/3){
    #introText{
        column-gap: var(--quarterUnit);
    }
}



@media (max-width: 1250px) or (max-aspect-ratio: 1/3){
    :root{
        --sectionItemHeight: calc((var(--elWidth) - var(--quarterUnit)) / 2);
    }
    .section:not(#mainTools){
        grid-template-columns: repeat(2, 1fr);
    }
    #mainTools{
        --sectionItemHeight: calc((var(--elWidth) - var(--halfUnit)) / 3);
    }
    .sectionItem:not(#mainTools .sectionItem){
        --sectionItemPadding: var(--halfUnit);
    }
    .sectionItem.image.odds{
        display: none;
    }
    .sectionItem.image.evens{
        display: flex;
    }
}


@media (max-width: 1300px) and (min-width: 1025px){
    #introText p{
        font-size: 0.9rem;
    }
}

@media (max-width: 1200px) and (min-width: 1025px){
    #introContent{
        padding: var(--thirdUnit);
    }
}

@media (max-width: 1100px) and (min-width: 1025px){
    #introText{
        columns: 1;
    }
}


@media (max-width: 1024px) or (max-aspect-ratio: 1/3){
    :root{
        --sigHeight: calc(var(--halfUnit) * 1.5);
    }

    .clicker{
        font-size: 30px;
        padding: 7.5px 7.5px 10.8px 7.5px;
    }

    .intro{
        flex-direction: column;
        height: var(--introHeight);
    }
    #imgContainer{
        margin-right: 0;
        max-width: 100%;
        height: fit-content;
        max-height: 50%;
        flex: none;
        overflow: hidden;
    }
    #imgContainer img{
        object-fit: cover;
        object-position: 50% 27%;
        height: fit-content;
    }
    #introContent{
        flex: 1;
    }
    #introContentWrapper{
        overflow-y: auto;
    }
    #introText{
        column-count: 2;
        height: fit-content;
    }
    
    .introCloseText.long{
        display: none;
    }
    .introCloseText.short{
        display: inline-block;
        height: fit-content;
    }
    .introCloseText *{
        font-size: 1.2rem;
        text-decoration-thickness: 2px !important;
    }
    #signature{
        bottom: 0.1rem;
    }
    .contactCloseText{
        bottom: calc(100% + 0.5rem);
    }
}



@media (max-width: 900px) or (max-aspect-ratio: 1/3){
    :root{
        --sigHeight: calc(var(--halfUnit) * 1.75);
    }

    #introText{
        column-count: 2;
        column-gap: var(--thirdUnit);
    }

    .introCloseText{
        right: 0.5rem;
    }

    #mainTools{
        grid-template-columns: repeat(2, 1fr);
        gap: var(--quarterUnit);
        --sectionItemHeight: calc((var(--elWidth) - var(--quarterUnit)) / 2);
    }
}



@media (max-width: 800px) or (max-aspect-ratio: 1/3){
    #signature{
        right: -0.4rem;
        top: calc(100% + 0.5rem);
    }
}



@media (max-width: 700px) or (max-aspect-ratio: 1/3){
    :root{
        --sectionItemHeight: var(--elWidth);
    }

    #introText{
        column-count: 1;
        column-gap: var(--thirdUnit);
    }

    .introCloseText.short{
        top: -1.9rem;
    }

    .introCloseText.short *{
        font-size: 1.1rem;
    }

    .section:not(#mainTools){
        grid-template-columns: repeat(1, 1fr);
    }

    .front, .back{
        padding: var(--unit);
    }

    .sectionItem.image.odds{
        display: flex;
    }

    .sectionItem.image.multiples{
        display: none;
    }
}



@media (max-width: 575px) or (max-aspect-ratio: 1/3){
    .clicker{
        font-size: 20px;
        padding: 5px 5px 7.2px 5px;
    }
    .rest{
        font-size: 1.5rem;
    }
    #signature{
        bottom: 0rem;
    }
    #mainTools{
        gap: var(--eighthUnit);
    }
}



@media (max-width: 530px) or (max-aspect-ratio: 1/3){
    .introCloseText *{
        font-size: 1rem !important;
    }
}



@media (max-width: 470px) or (max-aspect-ratio: 1/3){
    .front, .back{
        padding: var(--halfUnit);
    }
}

@media (max-width: 450px) or (max-aspect-ratio: 1/3){
    #mainTools h3{
        font-size: 1rem;
    }
  
    #mainTools img{
        height: calc(calc(var(--sectionItemHeight) - var(--sectionItemPadding) * 2) - calc(
            1.5em + var(--eighthUnit)));
        width: calc(calc(var(--sectionItemHeight) - var(--sectionItemPadding) * 2) - calc(
            1.5em + var(--eighthUnit)));
    }
}


@media (pointer: coarse) and (hover: none){
    .introCloseText a, .introCloseText_shorter a{
        animation: shiftleft 5s infinite;
    }

    .introCloseText a:nth-of-type(2), .introCloseText_shorter a:nth-of-type(2){
        animation: shiftright 5s infinite;
    }

    .slides img, .gridItem img, .sectionItem.image{
        filter: grayscale(0);
    }

    .introCloseText a:hover, 
    .introCloseText a:nth-of-type(2):hover, 
    .gridItem img:hover,
    .flipper:hover, .flipped:hover{
        transform: none;
    }

    .flipper.flipped{
        transform: rotateY(-180deg) !important;
    }

    .prev:hover, .next:hover{
        background-color: rgba(0, 0, 0, 0.3);
    }
}


@media (max-width: 800px) and (min-width: 701px){
    :root{
        --sectionItemPadding: var(--thirdUnit);
    }
}

@supports(height: 1svh){
    @keyframes shiftUp{
        0% { transform: translateY(100svh); }
        100% { transform: translateY(0vh); }
    } 
    .border.moveDOwn{
        top: 100svh;
    }
}